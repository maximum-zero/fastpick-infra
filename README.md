# ðŸ—ï¸ FastPick Infrastructure

FastPick í”„ë¡œì íŠ¸ëŠ” ëŒ€ê·œëª¨ íŠ¸ëž˜í”½ í™˜ê²½ì—ì„œì˜ ì„±ëŠ¥ ë³‘ëª©ì„ ìž¬í˜„í•˜ê³  ë¶„ì„í•˜ê¸° ìœ„í•´
ê° ì—­í• ì„ ë¶„ë¦¬í•œ ì¸í”„ë¼ êµ¬ì¡°ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

ë¶€í•˜ í…ŒìŠ¤íŠ¸, ì• í”Œë¦¬ì¼€ì´ì…˜, ë°ì´í„°ë² ì´ìŠ¤, ëª¨ë‹ˆí„°ë§ í™˜ê²½ì„ ë…ë¦½ì ìœ¼ë¡œ êµ¬ì„±í•˜ì—¬
ìžì› ê°„ì„­ì„ ìµœì†Œí™”í•˜ê³  ì„±ëŠ¥ ì§€í‘œì˜ ì‹ ë¢°ë„ë¥¼ í™•ë³´í•˜ëŠ” ë° ì´ˆì ì„ ë§žì·„ìŠµë‹ˆë‹¤.

---

## ðŸ§© ì¸í”„ë¼ êµ¬ì„± ê°œìš”

### ì „ì²´ êµ¬ì¡° ë‹¤ì´ì–´ê·¸ëž¨

![Infra Overview](docs/assets/infra-overview.png)

---

### ìƒì„¸ êµ¬ì¡°

```text
PC
 â”œâ”€ Jenkins (CI)
 â””â”€ K6 (Load Test)

VM1
 â””â”€ Nginx + Application Server

VM2
 â””â”€ PostgreSQL + Redis

VM3
 â””â”€ Prometheus + Grafana
```

> - ê° êµ¬ì„± ìš”ì†ŒëŠ” Docker ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, ì—­í•  ë‹¨ìœ„ë¡œ ë¶„ë¦¬ëœ í™˜ê²½ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ë°°í¬ ë° ìš´ì˜ë©ë‹ˆë‹¤.
> - VMì€ ë¡œì»¬ ê°€ìƒ ë¨¸ì‹  í™˜ê²½ì—ì„œ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

---

### ðŸ–¥ï¸ CI í™˜ê²½ (PC)

#### pc-jenkins/

```text
pc-jenkins/
- .env
- docker-compose.yml
```

**ì—­í• **

- Jenkinsë¥¼ Dockerë¡œ êµ¬ì„±í•œ CI í™˜ê²½
- ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹Œë“œ, í…ŒìŠ¤íŠ¸, ë°°í¬ ìžë™í™” ìˆ˜í–‰

**ì„¤ê³„ ì˜ë„**

- CI í™˜ê²½ì„ ì„œë¹„ìŠ¤ VMê³¼ ë¶„ë¦¬í•˜ì—¬ ë¹Œë“œ ìž‘ì—…ì´ ì„±ëŠ¥ ì‹¤í—˜ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ì„¤ê³„
- ë¡œì»¬ í™˜ê²½ì—ì„œë„ ìž¬í˜„ ê°€ëŠ¥í•œ CI íŒŒì´í”„ë¼ì¸ êµ¬ì„±

### ðŸ§ª ë¶€í•˜ í…ŒìŠ¤íŠ¸ í™˜ê²½ (PC)

#### performance-test/

```text
performance-test/
- scripts/
  - coupon-issue-test.js
  - coupon-search-test.js
  - users.csv
```

**ì—­í• **

- K6 ê¸°ë°˜ ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- ì¿ í° ì¡°íšŒ ë° ë°œê¸‰ ì‹œë‚˜ë¦¬ì˜¤ì— ëŒ€í•œ ì™¸ë¶€ íŠ¸ëž˜í”½ ìƒì„±

**ì„¤ê³„ ì˜ë„**

- ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ ë¶„ë¦¬ëœ ì™¸ë¶€ ë¶€í•˜ ë°œìƒê¸° êµ¬ì„±
- ë„¤íŠ¸ì›Œí¬ ê²½ë¡œë¥¼ ë¶„ë¦¬í•˜ì—¬ ë³‘ëª© êµ¬ê°„ì„ ëª…í™•ížˆ ê´€ì¸¡

### ðŸš€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ (VM1)

#### vm1-app/

```text
vm1-app/
- nginx/conf.d/default.conf
- .env
- docker-compose.yml
```

**ì—­í• **

- Nginx Reverse Proxy
- Spring Boot ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ ì‹¤í–‰

**ì„¤ê³„ ì˜ë„**

- íŠ¸ëž˜í”½ ì§„ìž… ì§€ì ê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ ë¶„ë¦¬
- Reverse Proxy ì„¤ì • ë³€ê²½ê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°°í¬ ë¶„ë¦¬
- ë‹¨ì¼ ì„œë²„ í™˜ê²½ì—ì„œì˜ ì²˜ë¦¬ í•œê³„ ë° ë³‘ëª© ì§€ì  ëª…í™•í™”

### ðŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ (VM2)

#### vm2-db/

```text
vm2-db/
- .env
- docker-compose.yml
```

**ì—­í• **

- PostgreSQL (ë°ì´í„°ë² ì´ìŠ¤)
- Redis (ìºì‹œ ë° ë™ì‹œì„± ì œì–´)

**ì„¤ê³„ ì˜ë„**

- DB ìžì›ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ ë¶„ë¦¬í•˜ì—¬ CPU, I/O ê²½í•© ìµœì†Œí™”
- ë™ì‹œì„± ì œì–´ ë° ì„±ëŠ¥ ì‹¤í—˜ ê²°ê³¼ì˜ ì‹ ë¢°ë„ í™•ë³´

### ðŸ“Š ëª¨ë‹ˆí„°ë§ ì„œë²„ (VM3)

#### vm3-monitoring/

```text
vm3-monitoring/
- prometheus/
  - prometheus.yml
- .env
- docker-compose.yml
```

**ì—­í• **

- Prometheus: ë©”íŠ¸ë¦­ ìˆ˜ì§‘
- Grafana: ë©”íŠ¸ë¦­ ì‹œê°í™”

**ì„¤ê³„ ì˜ë„**

- ëª¨ë‹ˆí„°ë§ í™˜ê²½ì„ ì„œë¹„ìŠ¤ ì„œë²„ì™€ ë¶„ë¦¬í•˜ì—¬ ì„±ëŠ¥ ì¸¡ì • ì‹œ ì˜¤ë²„í—¤ë“œ ì œê±°
- CPU, ë©”ëª¨ë¦¬, ì»¤ë„¥ì…˜, Active Session ì§€í‘œ ì‹¤ì‹œê°„ ë¶„ì„

---

## ðŸŽ¯ ì¸í”„ë¼ ì„¤ê³„ í•µì‹¬ í¬ì¸íŠ¸

- ì—­í•  ë‹¨ìœ„ VM ë¶„ë¦¬
  - ë¶€í•˜ í…ŒìŠ¤íŠ¸ / ì• í”Œë¦¬ì¼€ì´ì…˜ / DB / ëª¨ë‹ˆí„°ë§ ë…ë¦½ êµ¬ì„±
- ìžì› ê°„ì„­ ìµœì†Œí™”
  - ì„±ëŠ¥ ë³‘ëª© ì›ì¸ì„ ëª…í™•ížˆ ê´€ì¸¡ ê°€ëŠ¥
- ìž¬í˜„ ê°€ëŠ¥í•œ ì‹¤í—˜ í™˜ê²½
  - ë™ì¼í•œ ì¸í”„ë¼ êµ¬ì„±ìœ¼ë¡œ ë°˜ë³µ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- ë‹¨ì¼ ì„œë²„ ê¸°ë°˜ ë³‘ëª© ê´€ì°°ì— ì´ˆì ì„ ë‘” êµ¬ì¡°

---

## ðŸ§ª ì´ ì¸í”„ë¼ í™˜ê²½ì—ì„œ ê²€ì¦ëœ ì‹¤í—˜

ë³¸ ì¸í”„ë¼ êµ¬ì„±ì€ ì•„ëž˜ ë°±ì—”ë“œ ì„±ëŠ¥ ì‹¤í—˜ì„ ìž¬í˜„í•˜ê³ 
ì§€í‘œë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.

- [ëŒ€ê·œëª¨ ë°ì´í„° ì¡°íšŒ ì„±ëŠ¥ íŠœë‹](https://www.notion.so/2fc55588581980c3bebee8aa571b661e?source=copy_link)
- [ì‹¤ì‹œê°„ ì¿ í° ë°œê¸‰ ë™ì‹œì„± ì œì–´](https://www.notion.so/2fc55588581980d4b637f5ea13085351?source=copy_link)

---

## ðŸ”— ê´€ë ¨ ë¦¬í¬ì§€í† ë¦¬

> - [FastPick BE](https://github.com/maximum-zero/fastpick-be)
> - [FastPick FE](https://github.com/maximum-zero/fastpick-fe)
